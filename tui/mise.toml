[tasks.install]
description = "Install dependencies"
run = "go get"

[tasks.build]
description = "Build the TUI binary with version info"
run = """
go build -ldflags "-X 'github.com/bojanrajkovic/unquote/tui/internal/version.Version=dev' -X 'github.com/bojanrajkovic/unquote/tui/internal/version.Branch=$(git rev-parse --abbrev-ref HEAD)'" -o bin/unquote .
"""

[tasks.fmt]
description = "Format Go code with gofumpt"
run = "gofumpt -l -w -extra ."

[tasks.lint]
description = "Run golangci-lint"
run = "golangci-lint run ./..."

[tasks.vet]
description = "Run go vet"
run = "go vet ./..."

[tasks.test]
description = "Run Go tests"
run = "go test -v -race -count=1 ./..."

[tasks.ci]
description = "Run all CI checks"
run = """
set -e
mise run :install
mise run :fmt
mise run :vet
mise run :lint
mise run :test
mise run :build
"""
